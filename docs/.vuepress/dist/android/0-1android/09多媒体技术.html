<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>0-1Learning | 0-1Learning</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="0-1Learning">
    
    <link rel="preload" href="/assets/css/0.styles.af94bc93.css" as="style"><link rel="preload" href="/assets/js/app.17aee070.js" as="script"><link rel="preload" href="/assets/js/2.7958ad2e.js" as="script"><link rel="preload" href="/assets/js/1.7d2ce2f4.js" as="script"><link rel="preload" href="/assets/js/34.71351f91.js" as="script"><link rel="prefetch" href="/assets/js/10.b94503af.js"><link rel="prefetch" href="/assets/js/11.70d81406.js"><link rel="prefetch" href="/assets/js/12.f3bd2ddc.js"><link rel="prefetch" href="/assets/js/13.a937d7c7.js"><link rel="prefetch" href="/assets/js/14.479fcbe9.js"><link rel="prefetch" href="/assets/js/15.e8695e46.js"><link rel="prefetch" href="/assets/js/16.9218210b.js"><link rel="prefetch" href="/assets/js/17.d6a34ebd.js"><link rel="prefetch" href="/assets/js/18.d4e4d502.js"><link rel="prefetch" href="/assets/js/19.400e4260.js"><link rel="prefetch" href="/assets/js/20.df7c516c.js"><link rel="prefetch" href="/assets/js/21.8eee500b.js"><link rel="prefetch" href="/assets/js/22.2305a56b.js"><link rel="prefetch" href="/assets/js/23.3f29498b.js"><link rel="prefetch" href="/assets/js/24.1fa90cca.js"><link rel="prefetch" href="/assets/js/25.42edb11d.js"><link rel="prefetch" href="/assets/js/26.ef8e36d8.js"><link rel="prefetch" href="/assets/js/27.bfc3558c.js"><link rel="prefetch" href="/assets/js/28.8ce08aef.js"><link rel="prefetch" href="/assets/js/29.e5c88be8.js"><link rel="prefetch" href="/assets/js/3.4802e5b0.js"><link rel="prefetch" href="/assets/js/30.a2ec79f8.js"><link rel="prefetch" href="/assets/js/31.d878ec35.js"><link rel="prefetch" href="/assets/js/32.4e9b0598.js"><link rel="prefetch" href="/assets/js/33.34802552.js"><link rel="prefetch" href="/assets/js/35.2d0ea71e.js"><link rel="prefetch" href="/assets/js/36.9cfb657a.js"><link rel="prefetch" href="/assets/js/37.de816371.js"><link rel="prefetch" href="/assets/js/38.708a0eb4.js"><link rel="prefetch" href="/assets/js/39.495ff751.js"><link rel="prefetch" href="/assets/js/4.629d7e03.js"><link rel="prefetch" href="/assets/js/40.98c6bd77.js"><link rel="prefetch" href="/assets/js/41.79bd7ce7.js"><link rel="prefetch" href="/assets/js/42.9442e493.js"><link rel="prefetch" href="/assets/js/43.4fb3a986.js"><link rel="prefetch" href="/assets/js/44.5ca53d30.js"><link rel="prefetch" href="/assets/js/45.b59a36d2.js"><link rel="prefetch" href="/assets/js/46.de814031.js"><link rel="prefetch" href="/assets/js/47.eb0a0318.js"><link rel="prefetch" href="/assets/js/48.d2ca5ccf.js"><link rel="prefetch" href="/assets/js/49.838d5b41.js"><link rel="prefetch" href="/assets/js/5.f0820a50.js"><link rel="prefetch" href="/assets/js/50.19c7b492.js"><link rel="prefetch" href="/assets/js/51.9370a371.js"><link rel="prefetch" href="/assets/js/52.6444492e.js"><link rel="prefetch" href="/assets/js/53.3d02e4a0.js"><link rel="prefetch" href="/assets/js/54.dbec3ca9.js"><link rel="prefetch" href="/assets/js/55.5f4f23ae.js"><link rel="prefetch" href="/assets/js/56.3b4e082a.js"><link rel="prefetch" href="/assets/js/57.0a4cfa05.js"><link rel="prefetch" href="/assets/js/58.4b19a5cd.js"><link rel="prefetch" href="/assets/js/59.57922c23.js"><link rel="prefetch" href="/assets/js/6.a84a7b19.js"><link rel="prefetch" href="/assets/js/60.dc1aa1b3.js"><link rel="prefetch" href="/assets/js/61.59fd5324.js"><link rel="prefetch" href="/assets/js/62.5c4074d5.js"><link rel="prefetch" href="/assets/js/63.37319a25.js"><link rel="prefetch" href="/assets/js/64.e1e1bf3a.js"><link rel="prefetch" href="/assets/js/65.36378e94.js"><link rel="prefetch" href="/assets/js/66.e7aa3f49.js"><link rel="prefetch" href="/assets/js/67.045227dc.js"><link rel="prefetch" href="/assets/js/68.30918fbf.js"><link rel="prefetch" href="/assets/js/7.66951093.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.1b782076.js">
    <link rel="stylesheet" href="/assets/css/0.styles.af94bc93.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">0-1Learning</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/android/0-1android/09多媒体技术.html" class="nav-link">
  zh-CN
</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">
  en-US
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/android/0-1android/09多媒体技术.html" class="nav-link">
  zh-CN
</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link">
  en-US
</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_0-1learning"><a href="#_0-1learning" class="header-anchor">#</a> 0-1Learning</h1> <p><img src="/assets/img/luoxiaosheng.3e3f64f6.svg" alt="alt text" title="公众号"> <img src="/assets/img/luoxiaosheng_learning.c39ce245.svg" alt="alt text" title="学习"> <img src="/assets/img/luoxiaosheng_wechat.8efd3324.svg" alt="alt text" title="微信"></p> <h2 id="多媒体技术"><a href="#多媒体技术" class="header-anchor">#</a> 多媒体技术</h2> <h3 id="使用通知notification"><a href="#使用通知notification" class="header-anchor">#</a> 使用通知Notification</h3> <p>通知（Notification）是Android 系统中比较有特色的一个功能，当某个应用程序希望向用户发出一些提示信息，而该应用程序又不在前台运行时，就可以借助通知来实现。
发出一条通知后，手机最上方的状态栏中会显示一个通知的图标，下拉状态栏后可以看到通知的详细内容。</p> <h4 id="通知的用法"><a href="#通知的用法" class="header-anchor">#</a> 通知的用法</h4> <p>首先需要一个NotificationManager 来对通知进行管理，可以调用Context 的getSystemService()方法获取到。
getSystemService()方法接收一个字符串参数用于确定获取系统的哪个服务， 这里我们传入Context.NOTIFICATION_SERVICE 即可。
因此， 获取NotificationManager 的实例就可以写成：</p> <div class="language- extra-class"><pre class="language-text"><code>NotificationManager manager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

</code></pre></div><p>接下来需要创建一个Notification 对象，这个对象用于存储通知所需的各种信息，我们可以使用它的有参构造函数来进行创建。
第一个参数用于指定通知的图标，比如项目的res/drawable 目录下有一张icon.png 图片，那么这里就可以传入R.drawable.icon。
第二个参数用于指定通知的ticker 内容，当通知刚被创建的时候，它会在系统的状态栏一闪而过，属于一种瞬时的提示信息。
第三个参数用于指定通知被创建的时间，以毫秒为单位，当下拉系统状态栏时，这里指定的时间会显示在相应的通知上。
因此，创建一个Notification 对象就可以写成：</p> <div class="language- extra-class"><pre class="language-text"><code>Notification notification = new Notification(R.drawable.icon, &quot;This is ticker text&quot;,
System.currentTimeMillis());
</code></pre></div><p>创建好了Notification 对象后，我们还需要对通知的布局进行设定，这里只需要调用
Notification 的setLatestEventInfo()方法就可以给通知设置一个标准的布局。
第一个参数是Context，这个没什么好解释的。
第二个参数用于指定通知的标题内容，下拉系统状态栏就可以看到这部分内容。
第三个参数用于指定通知的正文内容，同样下拉系统状态栏就可以看到这部分内容。
第四个参数用于指定通知的点击效果，即PendingIntent，可以先传入null，。</p> <div class="language- extra-class"><pre class="language-text"><code>notification.setLatestEventInfo(context, &quot;This is content title&quot;, &quot;This is content text&quot;, null);
</code></pre></div><p>以上工作都完成之后，只需要调用NotificationManager 的notify()方法就可以让通知显示出来了。
notify()方法接收两个参数，
第一个参数是id，要保证为每个通知所指定的id 都是不同的。
第二个参数则是Notification 对象，这里直接将我们刚刚创建好的Notification 对象传入即可。
因此，显示一个通知就可以写成：</p> <div class="language- extra-class"><pre class="language-text"><code>manager.notify(1, notification);
</code></pre></div><h4 id="通知的点击效果pendingintent"><a href="#通知的点击效果pendingintent" class="header-anchor">#</a> 通知的点击效果PendingIntent</h4> <p>PendingIntent 从名字上看起来就和Intent 有些类似，它们之间也确实存在着不少共同点。
比如它们都可以去指明某一个“意图”，都可以用于启动活动、启动服务以及发送广播等。
不同的是，Intent 更加倾向于去立即执行某个动作，而PendingIntent 更加倾向于在某个合适的时机去执行某个动作。
所以，也可以把PendingIntent 简单地理解为延迟执行的Intent。
PendingIntent 的用法同样很简单，它主要提供了几个静态方法用于获取PendingIntent 的实例，
getActivity()方法：启动一个活动
getBroadcast()方法：发送广播
还是getService()方法：启动服务</p> <p>这几个方法所接收的参数都是相同的，
第一个参数依旧是Context，不用多做解释。
第二个参数一般用不到，通常都是传入0 即可。
第三个参数是一个Intent 对象，我们可以通过这个对象构建出PendingIntent 的“意图”。
第四个参数用于确定PendingIntent 的行为，有FLAG_ONE_SHOT、FLAG_NO_CREATE、FLAG_CANCEL_CURRENT 和FLAG_UPDATE_CURRENT 这四种值可选，</p> <p>因此，Notification 的setLatestEventInfo()方法的第四个参数传入PendingIntent 构建出一个延迟执行的“意图”，当用户点击这条通知时就会执行相应的逻辑。</p> <p>代码如下：</p> <div class="language- extra-class"><pre class="language-text"><code>NotificationManager manager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
Notification notification = new Notification(R.drawable.ic_launcher, &quot;This is ticker text&quot;, System.currentTimeMillis());
Intent intent = new Intent(this, NotificationActivity.class);
PendingIntent pi = PendingIntent.getActivity(this, 0, intent,PendingIntent.FLAG_CANCEL_CURRENT);
notification.setLatestEventInfo(this, &quot;This is content title&quot;,&quot;This is content text&quot;, pi);
manager.notify(1, notification);
</code></pre></div><p>通知取消
调用NotificationManager 的cancel()方法就可以取消通知了。
当时我们给这条通知设置的id 就是1。因此，如果你想要取消哪一条通知，就在cancel()方法中传入该通知的id 就行了。</p> <div class="language- extra-class"><pre class="language-text"><code>NotificationManager manager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
manager.cancel(1);
</code></pre></div><h4 id="通知的高级技巧"><a href="#通知的高级技巧" class="header-anchor">#</a> 通知的高级技巧</h4> <ol><li>播放音频</li></ol> <div class="language- extra-class"><pre class="language-text"><code>Uri soundUri = Uri.fromFile(new File(&quot;/system/media/audio/ringtones/
Basic_tone.ogg&quot;));
notification.sound = soundUri;
</code></pre></div><ol start="2"><li>设置震动</li></ol> <div class="language- extra-class"><pre class="language-text"><code>例：所以，如果想要让手机在通知到来的时候立刻振动1 秒，然后静止1 秒，再振动1 秒，代码就可以写成：
long[] vibrates = {0, 1000, 1000, 1000};
notification.vibrate = vibrates;

不过，想要控制手机振动还需要声明权限的。因此，我们还得编辑AndroidManifest.xml
文件，加入如下声明：
&lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;
……
</code></pre></div><ol start="3"><li><p>设置前置LED灯
ledARGB 用于控制LED 灯的颜色，一般有红绿蓝三种颜色可选。
ledOnMS 用于指定LED 灯亮起的时长，以毫秒为单位。
ledOffMS用于指定LED 灯暗去的时长，也是以毫秒为单位。
flags 可用于指定通知的一些行为，其中就包括显示LED 灯这一选项。
所以，当通知到来时，如果想要实现LED 灯以绿色的灯光一闪一闪的效果，就可以写成：
notification.ledARGB = Color.GREEN;
notification.ledOnMS = 1000;
notification.ledOffMS = 1000;
notification.flags = Notification.FLAG_SHOW_LIGHTS;</p></li> <li><p>使用通知的默认效果
当然，如果你不想进行那么多繁杂的设置，也可以直接使用通知的默认效果，它会根据
当前手机的环境来决定播放什么铃声，以及如何振动，写法如下：
notification.defaults = Notification.DEFAULT_ALL;
注意，以上所涉及的这些高级技巧都要在手机上运行才能看得到效果，模拟器是无法表现出振动、以及LED 灯闪烁等功能的。</p></li></ol> <h3 id="接收和发送短信"><a href="#接收和发送短信" class="header-anchor">#</a> 接收和发送短信</h3> <h4 id="接受短信"><a href="#接受短信" class="header-anchor">#</a> 接受短信</h4> <p>其实接收短信主要是利用了我们在第5 章学习过的广播机制。
当手机接收到一条短信的时候，系统会发出一条值为android.provider.Telephony.SMS_RECEIVED 的广播，
这条广播里携带着与短信相关的所有数据。每个应用程序都可以在广播接收器里对它进行监听，收到广播时再从中解析出短信的内容即可。</p> <div class="language- extra-class"><pre class="language-text"><code>1.创建一个广播接收器来接收系统发出的短信广播
class MessageReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();
        Object[] pdus = (Object[]) bundle.get(&quot;pdus&quot;); // 提取短信消息
        SmsMessage[] messages = new SmsMessage[pdus.length];
        for (int i = 0; i &lt; messages.length; i++) {
        messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
    }
    String address = messages[0].getOriginatingAddress(); // 获取发送方号码
    String fullMessage = &quot;&quot;;
    for (SmsMessage message : messages) {
        fullMessage += message.getMessageBody(); // 获取短信内容
    }
    sender.setText(address);
    content.setText(fullMessage);
}

2.MessageReceiver 进行注册才能让它接收到短信广播，代码如下所示：
public class MainActivity extends Activity {
    private TextView sender;
    private TextView content;
    private IntentFilter receiveFilter;
    private MessageReceiver messageReceiver;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        sender = (TextView) findViewById(R.id.sender);
        content = (TextView) findViewById(R.id.content);
        receiveFilter = new IntentFilter();
        receiveFilter.addAction(&quot;android.provider.Telephony.SMS_RECEIVED&quot;);
        messageReceiver = new MessageReceiver();
        registerReceiver(messageReceiver, receiveFilter);
    }
    @Override
    protected void onDestroy() {
        super.onDestroy();
        unregisterReceiver(messageReceiver);
    }
……
}

</code></pre></div><h4 id="拦截短信"><a href="#拦截短信" class="header-anchor">#</a> 拦截短信</h4> <p>我们就已经知道，有序广播的传递是可以截断的，而系统发出的短信广播正是一条有序广播，因此</p> <div class="language- extra-class"><pre class="language-text"><code>public class MainActivity extends Activity {
    ……
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        ……
        receiveFilter = new IntentFilter();
        receiveFilter.addAction(&quot;android.provider.Telephony.SMS_RECEIVED&quot;);
        receiveFilter.setPriority(100);
        messageReceiver = new MessageReceiver();
        registerReceiver(messageReceiver, receiveFilter);
    }
    ……
    class MessageReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            ……
            abortBroadcast();
        }
    }
}
</code></pre></div><h4 id="发送短信"><a href="#发送短信" class="header-anchor">#</a> 发送短信</h4> <p>sendTextMessage()方法接收五个参数，
其中第一个参数用于指定接收人的手机号码，
第三个参数用于指定短信的内容，
第四个参数用于监控短信发送状态回执，例：PendingIntent pi = PendingIntent.getBroadcast(MainActivity.this, 0, sentIntent, 0);
其他的几个参数我们暂时用不到，直接传入null就可以了。</p> <div class="language- extra-class"><pre class="language-text"><code>SmsManager smsManager = SmsManager.getDefault();
smsManager.sendTextMessage(to.getText().toString(), null,msgInput.getText().toString(), null, null);

权限申请：
&lt;uses-permission android:name=&quot;android.permission.RECEIVE_SMS&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission. SEND_SMS&quot; /&gt;
……

</code></pre></div><h3 id="调用摄像头和相册"><a href="#调用摄像头和相册" class="header-anchor">#</a> 调用摄像头和相册</h3> <h4 id="调用摄像头拍照"><a href="#调用摄像头拍照" class="header-anchor">#</a> 调用摄像头拍照</h4> <p>主要分为两步:1.启动相机程序  2.获取保存的图片</p> <div class="language- extra-class"><pre class="language-text"><code>1.启动相机程序
private Uri imageUri;
// 创建File对象，用于存储拍照后的图片
File outputImage = new File(Environment.getExternalStorageDirectory(), &quot;tempImage.jpg&quot;);
imageUri = Uri.fromFile(outputImage);

Intent intent = new Intent(&quot;android.media.action. IMAGE_CAPTURE&quot;);
intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
startActivityForResult(intent, TAKE_PHOTO); // 启动相机程序

2.获取保存的图片（这里使用onActivityResult实现）
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case TAKE_PHOTO:
            if (resultCode == RESULT_OK) {
                Intent intent = new Intent(&quot;com.android.camera.action.CROP&quot;);
                intent.setDataAndType(imageUri, &quot;image/*&quot;);
                intent.putExtra(&quot;scale&quot;, true);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
                startActivityForResult(intent, CROP_PHOTO); // 启动裁剪程序
            }
        break;
        case CROP_PHOTO:
            if (resultCode == RESULT_OK) {
                try {
                    Bitmap bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(imageUri));
                    picture.setImageBitmap(bitmap); // 将裁剪后的照片显示出来
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                }
            }
            break;
        default:
            break;
    }
}

权限：&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;
</code></pre></div><h4 id="从相册中选择照片"><a href="#从相册中选择照片" class="header-anchor">#</a> 从相册中选择照片</h4> <div class="language- extra-class"><pre class="language-text"><code>// 创建File对象，用于存储选择的照片
File outputImage = new File(Environment.
getExternalStorageDirectory(), &quot;output_image.jpg&quot;);
try {
    if (outputImage.exists()) {
        outputImage.delete();
    }
    outputImage.createNewFile();
} catch (IOException e) {
    e.printStackTrace();
}
imageUri = Uri.fromFile(outputImage);
Intent intent = new Intent(&quot;android.intent.action.GET_CONTENT&quot;);
intent.setType(&quot;image/*&quot;);
intent.putExtra(&quot;crop&quot;, true);
intent.putExtra(&quot;scale&quot;, true);
intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
startActivityForResult(intent, CROP_PHOTO);
</code></pre></div><h3 id="播放多媒体文件"><a href="#播放多媒体文件" class="header-anchor">#</a> 播放多媒体文件</h3> <h4 id="播放音频"><a href="#播放音频" class="header-anchor">#</a> 播放音频</h4> <p>在Android 中播放音频文件一般都是使用MediaPlayer 类来实现的，下表列出了MediaPlayer 类中一些较为常用的控制方法。</p> <p>setDataSource() 设置要播放的音频文件的位置。
prepare() 在开始播放之前调用这个方法完成准备工作。
start() 开始或继续播放音频。
pause() 暂停播放音频。
reset() 将MediaPlayer 对象重置到刚刚创建的状态。
seekTo() 从指定的位置开始播放音频。
stop() 停止播放音频。调用这个方法后的MediaPlayer 对象无法再播放音频。
release() 释放掉与MediaPlayer 对象相关的资源。
isPlaying() 判断当前MediaPlayer 是否正在播放音频。
getDuration() 获取载入的音频文件的时长</p> <div class="language- extra-class"><pre class="language-text"><code>1.初始化MediaPlayer()
private void initMediaPlayer() {
    try {
        File file = new File(Environment.getExternalStorageDirectory(),&quot;music.mp3&quot;);
        mediaPlayer.setDataSource(file.getPath()); // 指定音频文件的路径
        mediaPlayer.prepare(); // 让MediaPlayer进入到准备状态
    } catch (Exception e) {
        e.printStackTrace();
    }
}
2.开始播放
mediaPlayer.start(); // 开始播放
3.暂停
mediaPlayer.pause(); // 暂停播放
4.停止播放
mediaPlayer.reset(); // 停止播放
initMediaPlayer();  //停止后如需重新播放需要重新初始化

5.释放MediaPlayer
protected void onDestroy() {
    super.onDestroy();
    if (mediaPlayer != null) {
        mediaPlayer.stop();
        mediaPlayer.release();
    }
}
</code></pre></div><h4 id="播放视频"><a href="#播放视频" class="header-anchor">#</a> 播放视频</h4> <p>播放视频文件其实并不比播放音频文件复杂，主要是使用VideoView 类来实现的。主要有以下常用方法：</p> <p>setVideoPath() 设置要播放的视频文件的位置。
start() 开始或继续播放视频。
pause() 暂停播放视频。
resume() 将视频重头开始播放。
seekTo() 从指定的位置开始播放视频。
isPlaying() 判断当前是否正在播放视频。
getDuration() 获取载入的视频文件的时长。</p> <div class="language- extra-class"><pre class="language-text"><code>1.初始化VideoView
private void initVideoPath() {
File file = new File(Environment.getExternalStorageDirectory(),
&quot;movie.3gp&quot;);
videoView.setVideoPath(file.getPath()); // 指定视频文件的路径
}

videoView.start(); // 开始播放
videoView.pause(); // 暂时播放
videoView.resume(); // 重新播放

2.释放VideoView
@Override
protected void onDestroy() {
super.onDestroy();
if (videoView != null) {
videoView.suspend();
}
}
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.17aee070.js" defer></script><script src="/assets/js/2.7958ad2e.js" defer></script><script src="/assets/js/1.7d2ce2f4.js" defer></script><script src="/assets/js/34.71351f91.js" defer></script>
  </body>
</html>
